<div ng-if="model.display.hasMetadata">
    <div>
        <h3>{{model.metadata['Title'].value}}</h3>
        <button type="button" class="btn btn-primary" ng-click="downloadMetadata(model.item.id)">
            Download Metadata
        </button>
    </div>

    <p>{{model.metadata['Description'].value}}</p>
    <em>{{model.metadata['Creator'].value}} ({{model.metadata['Publication Year'].value}})</em>

    <p ng-if="model.metadata['identifierType'].value && model.metadata['Identifier'].value"> {{model.metadata['identifierType'].value}}: {{model.metadata['Identifier'].value}}</p>

    <p ng-if="model.metadata['alternateIdentifierType'].value && model.metadata['AlternateIdentifier'].value"> {{model.metadata['alternateIdentifierType'].value}}: {{model.metadata['AlternateIdentifier'].value}}</p>
    <p ng-bind-html="model.display.Rights"><p>

    <div>
        <p>Export Formats:
            <button type="button" class="btn btn-link" ng-click="getCitation('BibTeX')">BibTeX</button>
            <button type="button" class="btn btn-link" ng-click="getCitation('Endnote')">Endnote</button>
        </p>
        <div id="citation" ng-if="model.display.citationFormat">
            <div class="dropdown">
              <button class="btn btn-link" type="button" ng-click="downloadCitation(model.display.citationFormat)">Download As {{model.display.citationFormat}}
             <!--  <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Download As {{model.display.citationFormat}}
              <span class="caret"></span></button>
              <ul class="dropdown-menu">
                <li><a href="#" ng-click="downloadCitation('BibTeX')">BibTeX</a></li>
                <li><a href="#" ng-click="downloadCitation('Endnote')">Endnote</a></li>
              </ul> -->
            </div>

            <pre ng-bind-html="model.display.citation"></pre>
        </div>
    </div>

    <button type="button" class="btn btn-primary" ng-click="metadataToggle()">
        {{model.display.showMoreButton}}
    </button>
</div>

<div ng-show="expandMetadata" ng-if="model.metadata">
    <ul class="list-group">
        <li class="list-group-item" ng-repeat="meta in model.display.sortedMetadata">
            <div class="row">
                <div class="col-sm-3">
                    <b >{{meta.key}}</b>
                </div>
                <div class="col-sm-9">
                    {{ meta.value }}
                </div>
            </div>
        </li>
        <!-- <li class="list-group-item" ng-if="model.metadata['Identifier'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >{{model.metadata['identifierType'].value}}</b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Identifier'].value}}
                </div>
            </div>
        </li>
        <li class="list-group-item" ng-if="model.metadata['Creator'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >Creator</b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Creator'].value}}
                </div>
            </div>
        </li>
        <li class="list-group-item" ng-if="model.metadata['Title'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >Title</b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Title'].value}}
                </div>
            </div>
        </li>
        <li class="list-group-item" ng-if="model.metadata['Publisher'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >Publisher</b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Publisher'].value}}
                </div>
            </div>
        </li>
        <li class="list-group-item" ng-if="model.metadata['Publication Year'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >Publication Year</b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Publication Year'].value}}
                </div>
            </div>
        </li>
        <li class="list-group-item" ng-if="model.metadata['Resource Type General'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >Resource Type General</b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Resource Type General'].value}}
                </div>
            </div>
        </li>
        <li class="list-group-item" ng-if="model.metadata['Resource Type'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >Resource Type</b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Resource Type'].value}}
                </div>
            </div>
        </li>
        <li class="list-group-item" ng-if="model.metadata['Description'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >Description</b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Description'].value}}
                </div>
            </div>
        </li>
        <li class="list-group-item" ng-if="model.metadata['Subject'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >Subject</b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Subject'].value}}
                </div>
            </div>
        </li>
        <li class="list-group-item" ng-if="model.metadata['Contributor Name'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >{{model.metadata['Contributor Type'].value}} </b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Contributor Name'].value}}
                </div>
            </div>
        </li>
        <li class="list-group-item" ng-if="model.metadata['Alternate Identifier'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >{{model.metadata['Alternate Identifier Type'].value}}</b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Alternate Identifier'].value}}
                </div>
            </div>
        </li>
        <li class="list-group-item" ng-if="model.metadata['Related Identifier'].value">
            <div class="row">
                <div class="col-sm-3">
                    <b >{{model.metadata['Related Identifier Type'].value}}</b>
                </div>
                <div class="col-sm-9">
                    {{model.metadata['Related Identifier'].value}}
                </div>
            </div>
        </li> -->
    </ul>
</div>

<div style="min-height: 300px;" id="directory-contents">
    <div class="table-responsive">
        <table class="table table-bordered table-striped">
            <tr ng-repeat="folder in model.collection.folders">
                <td>
                    <a ng-href="/browse{{ folder.path }}" ng-click="browse($event, folder)">
                        <i class="fa fa-folder"></i> {{ folder.label }}
                    </a>
                    <span ng-if="folder.loading"><i class="fa fa-spinner fa-spin"></i></span>
                </td>
                <td></td>
            </tr>
            <tr ng-repeat="file in model.collection.files">
                <td>
                    <a ng-href="/browse{{ file.path }}" ng-click="browse($event, file)">
                        <i class="fa fa-file-o"></i> {{ file.label }}
                    </a>
                    <span ng-if="file.loading"><i class="fa fa-spinner fa-spin"></i></span>
                </td>
                <td>
                    ({{ file['file-size']|bytes }})
                </td>
            </tr>
        </table>
    </div>
</div>

<nav aria-label="Directory paging" ng-if="model.pagination.show">
    <ul uib-pagination total-items="model.pagination.total" items-per-page="model.pagination.pageSize" ng-model="model.pagination.current" ng-change="pageChanged()"></ul>
</nav>

<div>
    Displaying {{model.pagination.item_start}}-{{model.pagination.item_end}} of {{model.collection.total}} items
</div>